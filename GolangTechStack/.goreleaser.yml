version: 2
project_name: golang-techstack

builds:
  - id: linux_amd64
    main: ./cmd/golang-techstack
    goos: [linux]
    goarch: [amd64]
    binary: golang-techstack-linux_amd64
    flags:
      - -trimpath
    ldflags:
      - -s -w
      - -X main.version={{.Version}}
      - -X main.commit={{.Commit}}
      - -X main.date={{.Date}}

  - id: darwin_arm64
    main: ./cmd/golang-techstack
    goos: [darwin]
    goarch: [arm64]
    binary: golang-techstack-darwin_arm64
    flags:
      - -trimpath
    ldflags:
      - -s -w
      - -X main.version={{.Version}}
      - -X main.commit={{.Commit}}
      - -X main.date={{.Date}}

  - id: windows_amd64
    main: ./cmd/golang-techstack
    goos: [windows]
    goarch: [amd64]
    binary: golang-techstack-windows_amd64
    flags:
      - -trimpath
    ldflags:
      - -s -w
      - -X main.version={{.Version}}
      - -X main.commit={{.Commit}}
      - -X main.date={{.Date}}

archives:
  - id: linux
    builds: [linux_amd64]
    format_overrides: []  # Let GoReleaser choose the default format
    name_template: "{{ .ProjectName }}_{{ .Version }}_linux_{{ .Arch }}"

  - id: macos
    builds: [darwin_arm64]
    format_overrides: []  # Let GoReleaser choose the default format
    name_template: "{{ .ProjectName }}_{{ .Version }}_macos_{{ .Arch }}"

  - id: windows
    builds: [windows_amd64]
    format_overrides: 
      - goos: windows
        format: zip
    name_template: "{{ .ProjectName }}_{{ .Version }}_windows_{{ .Arch }}"

changelog:
  use: git

release:
  github:
    owner: udaykishore-resu
    name: golang-techstack
