version: 2
project_name: golang-techstack

builds:
  - id: linux_amd64
    main: ./cmd/golang-techstack
    goos: [linux]
    goarch: [amd64]
    dir: build
    binary: golang-techstack-linux_amd64

  - id: darwin_arm64
    main: ./cmd/golang-techstack
    goos: [darwin]
    goarch: [arm64]
    dir: build
    binary: golang-techstack-darwin_arm64

  - id: windows_amd64
    main: ./cmd/golang-techstack
    goos: [windows]
    goarch: [amd64]
    dir: build
    binary: golang-techstack-windows_amd64

archives:
  - id: linux
    format: tar.gz
    builds: [linux_amd64]
    name_template: "{{ .ProjectName }}_{{ .Version }}_linux_{{ .Arch }}"

  - id: macos
    format: tar.gz
    builds: [darwin_arm64]
    name_template: "{{ .ProjectName }}_{{ .Version }}_macos_{{ .Arch }}"

  - id: windows
    format: zip
    builds: [windows_amd64]
    name_template: "{{ .ProjectName }}_{{ .Version }}_windows_{{ .Arch }}"

before:
  hooks:
    - go test ./...

signs:
  - artifacts: build/*
    cmd: gpg 
    args: ["--armor", "--detach-sign", "--output", "{{ .ArtifactName }}.sig", "{{ .ArtifactPath }}"]

changelog:
  use: git

release:
  mode: keep-existing
  github:
    owner: udaykishore-resu
    name: golang-techstack
  draft: false